{
  "version": "2.0.0-banking-professional",
  "pdf": {
    "rendering": {
      "sourceOfTruth": "ui",
      "noNewMath": true,
      "bindStrategy": "byKey",
      "interpolateStrings": true,
      "fallbackNullToEmpty": true
    },
    "dataBindings": {
      "brand": { "logoUrl": ["ui.brand.logoUrl", "ui.brand.logo", "ui.logoUrl", "logoBase64"] },
      "meta": {
        "reportId": ["ui.report.id", "report.id"],
        "reportDate": ["ui.report.dateISO", "report.createdAtISO"]
      },
      "merchant": {
        "name": ["ui.sections.customerInformation.rows[0].value", "inputs.businessName", "'Business'"]
      },
      "salesImpact": {
        "heroNumber": ["ui.sections.salesImpact.heroNumber"],
        "annualImpact": ["ui.sections.salesImpact.annualImpact"],
        "costReduction": ["ui.sections.salesImpact.costReduction"]
      },
      "metrics": {
        "monthlySavings": ["ui.sections.salesImpact.heroNumber"],
        "annualSavings": ["ui.sections.salesImpact.annualImpact"],
        "costReductionPct": ["ui.sections.salesImpact.costReduction"],
        "currentCost": ["results.currentCost"],
        "newProgramNetCost": ["results.newCost"],
        "processorCharge": ["results.processorChargeCards"],
        "diffCollected": ["results.cardMarkupCollected"],
        "programType": ["inputs.programType"]
      },
      "salesRep": {
        "name": ["ui.sections.customerInformation.rows[6].value", "inputs.salesRepName", "'Your Representative'"],
        "email": ["ui.sections.customerInformation.rows[7].value", "inputs.salesRepEmail", "'sales@dmp.com'"],
        "phone": ["ui.sections.customerInformation.rows[8].value", "inputs.salesRepPhone", "'1-800-DMP-SAVE'"]
      },
      "customerInfo": {
        "title": ["ui.sections.customerInformation.title", "'Customer Information'"],
        "rows": ["ui.sections.customerInformation.rows"]
      },
      "inputParams": {
        "title": ["ui.sections.inputParameters.title", "'Input Parameters'"],
        "rows": ["ui.sections.inputParameters.rows"]
      },
      "liveVolume": {
        "title": ["ui.sections.liveVolumeBreakdown.title", "'Technical Calculation Details'"],
        "note": ["ui.sections.liveVolumeBreakdown.note", "ui.orderOfOperationsText"],
        "rows": ["ui.sections.liveVolumeBreakdown.rows"]
      },
      "monthlySavings": {
        "title": ["ui.sections.monthlyProcessingSavings.title", "'Processing Cost Breakdown'"],
        "rows": ["ui.sections.monthlyProcessingSavings.rows", "ui.monthlySavings.items"]
      }
    },
    "theme": {
      "colors": {
        "primary": "#003366",
        "secondary": "#0056b3",
        "success": "#28a745",
        "danger": "#dc3545",
        "neutral90": "#1a1a1a",
        "neutral70": "#333",
        "neutral50": "#666",
        "neutral30": "#888",
        "neutral10": "#dee2e6",
        "bgLight": "#f8f9fa",
        "bgSubtle": "#fafafa",
        "white": "#ffffff"
      },
      "typography": {
        "fontFamily": "-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif",
        "h1": { "size": 22, "weight": 600, "color": "neutral90" },
        "h2": { "size": 14, "weight": 600, "color": "neutral90" },
        "h3": { "size": 12, "weight": 600, "color": "neutral70" },
        "body": { "size": 11, "weight": 400, "color": "neutral70" },
        "small": { "size": 10, "weight": 400, "color": "neutral50" },
        "fine": { "size": 9, "weight": 400, "color": "neutral30" },
        "label": { "size": 10, "weight": 600, "color": "neutral50" },
        "value": { "size": 11, "weight": 500, "color": "neutral90" }
      },
      "layout": {
        "pageWidthIn": 8.5,
        "pageHeightIn": 11,
        "marginIn": 0.75,
        "gridGap": 20,
        "cardPadding": 16
      },
      "borders": { 
        "radius": 4, 
        "standard": "1px solid #dee2e6",
        "emphasis": "2px solid #003366"
      }
    },
    "formatting": {
      "currency": { "decimals": 2, "thousands": true, "style": "leadingMinus", "symbol": "$", "align": "right" },
      "percent": { "decimals": 1, "suffix": "%", "thousands": false, "style": "leadingMinus", "align": "right" },
      "normalizePercent": { "mode": "auto", "thresholdGtOneTreatAsPercent": true },
      "tabularNumbers": true
    },
    "pages": [
      {
        "name": "Executive",
        "header": {
          "title": "<div class='header-professional'><div><img class='header-logo' src='{{ brand.logoUrl }}' alt='DMP'/><span class='header-title'>Fee Recovery Analysis</span></div><div class='header-meta'>Report # {{ meta.reportId }}<br/>{{ meta.reportDate }}</div></div>",
          "showOnPage": 1
        },
        "layout": { "columns": 12, "gap": 0 },
        "body": [
          {
            "type": "custom",
            "colSpan": 12,
            "template": "<div class='executive-summary'><div class='title'>Executive Summary</div><div class='content'>This analysis is presented by Dynamic Merchant Processing (DMP) to illustrate the savings realized from the {{ metrics.programType }} program based on inputs provided for {{ merchant.name }} on {{ meta.reportDate }}. Figures are estimates derived from the current processing profile and card-mix assumptions.</div></div>"
          },
          {
            "type": "custom",
            "colSpan": 12,
            "template": "<div class='two-column-grid'><div class='column-left'><div class='h2'>Your Monthly Impact</div><div class='kpi-grid'><div class='kpi-card'><div class='kpi-label'>Monthly Savings (Est.)</div><div class='kpi-value'>{{ FORMAT.money(metrics.monthlySavings) }}</div><div class='kpi-note'>Annualized: {{ FORMAT.money(metrics.annualSavings) }}</div></div><div class='kpi-card'><div class='kpi-label'>Cost Reduction vs Today</div><div class='kpi-value'>{{ FORMAT.percent(metrics.costReductionPct) }}</div><div class='kpi-note'>of processing eliminated</div></div><div class='kpi-card'><div class='kpi-label'>Program</div><div class='kpi-value small'>{{ metrics.programType }}</div><div class='kpi-tag'>Compliant</div></div></div><div class='comparison-chart'><div class='comparison-row'><div class='comparison-label'>Today</div><div class='bar-container'><div class='bar-fill current' style='width:{{ Math.max(metrics.currentCost, metrics.newProgramNetCost) > 0 ? (metrics.currentCost / Math.max(metrics.currentCost, Math.abs(metrics.newProgramNetCost)) * 100) : 100 }}%'><span class='bar-value'>{{ FORMAT.money(metrics.currentCost) }}</span></div></div></div><div class='comparison-row'><div class='comparison-label'>With Program</div><div class='bar-container'><div class='bar-fill program' style='width:{{ Math.max(metrics.currentCost, Math.abs(metrics.newProgramNetCost)) > 0 ? (Math.abs(metrics.newProgramNetCost) / Math.max(metrics.currentCost, Math.abs(metrics.newProgramNetCost)) * 100) : 0 }}%'><span class='bar-value'>{{ FORMAT.money(metrics.newProgramNetCost) }}</span></div></div></div></div><table class='waterfall-table'><tr><td>Current Processing Cost</td><td class='num'>{{ FORMAT.money(metrics.currentCost) }}</td></tr><tr><td>Processor Charge on Cards</td><td class='num'>{{ FORMAT.money(metrics.processorCharge) }}</td></tr><tr class='subtraction'><td>Price Differential Collected</td><td class='num'>{{ FORMAT.money(metrics.diffCollected) }}</td></tr><tr class='total'><td>Net Processing Cost (Program)</td><td class='num'>{{ FORMAT.money(metrics.newProgramNetCost) }}</td></tr></table><div class='fine'>Details and assumptions appear on Page 2.</div></div><div class='column-right'><div class='decision-section'><div class='title'>Savings Allocation Plan</div><ul class='decision-list'><li><span class='allocation-amount'>{{ FORMAT.money(metrics.monthlySavings) }}</span> per month → Covers two server shifts weekly</li><li><span class='allocation-amount'>{{ FORMAT.money(metrics.monthlySavings * 3) }}</span> per quarter → Funds equipment refresh cycle</li><li><span class='allocation-amount'>{{ FORMAT.money(metrics.annualSavings) }}</span> per year → Enables expansion opportunities</li></ul></div><div class='decision-section'><div class='title'>Service & Implementation</div><ul class='decision-list'><li>Best-in-class service, led by POS professionals who manage the changeover end-to-end</li><li>Structured onboarding with menu/config migration and staff orientation</li><li>Post-go-live support via rapid-response service desk</li></ul></div><div class='next-steps'><div class='title'>Next Steps</div><div style='margin-bottom:8px'><span class='step-number'>1</span>Confirm inputs & program selection</div><div style='margin-bottom:8px'><span class='step-number'>2</span>Schedule installation window</div><div style='margin-bottom:8px'><span class='step-number'>3</span>Go live and verify savings on first statement</div><div class='contact-line'><strong>Contact:</strong> {{ salesRep.name }}<br/><strong>Email:</strong> <a href='mailto:{{ salesRep.email }}'>{{ salesRep.email }}</a><br/><strong>Phone:</strong> {{ salesRep.phone }}</div></div></div></div>"
          }
        ],
        "footer": { 
          "left": "This quote is provided as an estimate of potential savings only. Actual results may vary.", 
          "right": "© DMP — Confidential"
        }
      },
      {
        "name": "Details",
        "header": { "title": "", "showOnPage": 0 },
        "layout": { "columns": 12, "gap": 16 },
        "body": [
          {
            "type": "custom",
            "colSpan": 12,
            "template": "<div class='page-break'></div>"
          },
          {
            "type": "card",
            "colSpan": 12,
            "title": "{{ customerInfo.title }}",
            "table": {
              "cols": [
                { "key": "label", "title": "Field", "align": "left" },
                { "key": "value", "title": "Value", "align": "right" }
              ],
              "rowsFrom": [{ "from": "customerInfo.rows" }],
              "valueFormatHintKey": "format",
              "tableClass": "table-professional"
            }
          },
          {
            "type": "card",
            "colSpan": 12,
            "title": "Inputs & Assumptions",
            "table": {
              "cols": [
                { "key": "label", "title": "Parameter", "align": "left" },
                { "key": "value", "title": "Value", "align": "right" }
              ],
              "rowsFrom": [{ "from": "inputParams.rows" }],
              "valueFormatHintKey": "format",
              "tableClass": "table-professional"
            }
          },
          {
            "type": "card",
            "colSpan": 12,
            "title": "{{ liveVolume.title }}",
            "note": "{{ liveVolume.note }}",
            "table": {
              "cols": [
                { "key": "label", "title": "Calculation", "align": "left" },
                { "key": "value", "title": "Amount", "align": "right" }
              ],
              "rowsFrom": [{ "from": "liveVolume.rows" }],
              "valueFormatHintKey": "format",
              "tableClass": "table-professional"
            }
          },
          {
            "type": "card",
            "colSpan": 12,
            "title": "{{ monthlySavings.title }}",
            "table": {
              "cols": [
                { "key": "label", "title": "Item", "align": "left" },
                { "key": "value", "title": "Value", "align": "right" }
              ],
              "rowsFrom": [{ "from": "monthlySavings.rows" }],
              "valueFormatHintKey": "format",
              "tableClass": "table-professional"
            }
          }
        ],
        "footer": { 
          "left": "Trusted by 2,000+ businesses nationwide", 
          "right": "© DMP — Confidential"
        }
      }
    ]
  },
  "styles": {
    "globalCss": "body{ font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;font-size:12px;line-height:1.5;color:#1a1a1a;margin:0;padding:0;}@page{ size:Letter;margin:0.75in;@bottom-center{ content:'Page ' counter(page) ' of ' counter(pages);font-size:9px;color:#666;}}.h1{ font-size:22px;font-weight:600;color:#1a1a1a;margin:0 0 12px 0;line-height:1.2;}.h2{ font-size:14px;font-weight:600;color:#1a1a1a;margin:0 0 8px 0;line-height:1.3;}.h3{ font-size:12px;font-weight:600;color:#333;margin:0 0 6px 0;}.small{ font-size:10px;color:#666;}.fine{ font-size:9px;color:#888;}.num{ text-align:right;font-variant-numeric:tabular-nums lining-nums;font-feature-settings:'tnum' on, 'lnum' on;}.page{ page-break-after:always;page-break-inside:avoid;}.page:last-child{ page-break-after:auto;}.page-break{ page-break-before:always;}.header-professional{ display:flex;justify-content:space-between;align-items:flex-end;margin-bottom:24px;padding-bottom:8px;border-bottom:2px solid #003366;}.header-logo{ height:32px;}.header-title{ font-size:16px;font-weight:600;color:#003366;}.header-meta{ font-size:10px;color:#666;text-align:right;}.executive-summary{ background:#f8f9fa;border:1px solid #dee2e6;border-radius:4px;padding:16px;margin-bottom:20px;}.executive-summary .title{ font-size:14px;font-weight:600;color:#003366;margin-bottom:8px;}.executive-summary .content{ font-size:11px;line-height:1.6;color:#333;}.two-column-grid{ display:table;width:100%;table-layout:fixed;gap:20px;}.column-left{ display:table-cell;width:60%;padding-right:20px;vertical-align:top;}.column-right{ display:table-cell;width:40%;vertical-align:top;}.kpi-grid{ display:table;width:100%;margin-bottom:16px;}.kpi-card{ display:table-cell;background:white;border:1px solid #dee2e6;border-radius:4px;padding:12px;text-align:center;vertical-align:top;}.kpi-card + .kpi-card{ border-left:none;}.kpi-label{ font-size:10px;font-weight:600;color:#666;text-transform:uppercase;letter-spacing:0.5px;margin-bottom:4px;}.kpi-value{ font-size:20px;font-weight:700;color:#003366;font-variant-numeric:tabular-nums;margin-bottom:2px;}.kpi-note{ font-size:9px;color:#888;}.kpi-tag{ display:inline-block;background:#28a745;color:white;font-size:8px;padding:2px 6px;border-radius:2px;text-transform:uppercase;margin-top:4px;}.comparison-chart{ background:#fafafa;border:1px solid #dee2e6;border-radius:4px;padding:12px;margin-bottom:16px;}.comparison-row{ margin-bottom:10px;}.comparison-label{ font-size:10px;font-weight:600;color:#333;margin-bottom:2px;}.bar-container{ background:#e9ecef;height:20px;border-radius:2px;position:relative;overflow:hidden;}.bar-fill{ height:100%;background:#003366;display:inline-block;}.bar-fill.current{ background:#dc3545;}.bar-fill.program{ background:#28a745;}.bar-value{ position:absolute;right:4px;top:50%;transform:translateY(-50%);font-size:10px;font-weight:600;color:white;}.waterfall-table{ width:100%;border-collapse:collapse;margin-bottom:8px;font-size:11px;}.waterfall-table td{ padding:6px 8px;border-bottom:1px solid #e9ecef;}.waterfall-table td:first-child{ text-align:left;color:#333;}.waterfall-table td:last-child{ text-align:right;font-weight:600;font-variant-numeric:tabular-nums;}.waterfall-table tr.total td{ border-top:2px solid #003366;border-bottom:2px solid #003366;font-weight:700;color:#003366;}.waterfall-table tr.subtraction td:last-child::before{ content:'− ';}.decision-section{ background:white;border:1px solid #dee2e6;border-radius:4px;padding:12px;margin-bottom:16px;}.decision-section .title{ font-size:12px;font-weight:600;color:#003366;margin-bottom:8px;padding-bottom:4px;border-bottom:1px solid #e9ecef;}.decision-list{ list-style:none;padding:0;margin:0;}.decision-list li{ font-size:11px;color:#333;margin-bottom:6px;padding-left:16px;position:relative;}.decision-list li::before{ content:'•';color:#003366;position:absolute;left:0;}.allocation-amount{ font-weight:600;color:#003366;}.next-steps{ background:#f0f4f8;border:1px solid #003366;border-radius:4px;padding:12px;}.next-steps .title{ font-size:12px;font-weight:600;color:#003366;margin-bottom:8px;}.step-number{ display:inline-block;width:20px;height:20px;background:#003366;color:white;text-align:center;border-radius:50%;font-size:10px;line-height:20px;margin-right:8px;}.contact-line{ margin-top:12px;padding-top:8px;border-top:1px solid #dee2e6;font-size:11px;color:#333;}.contact-line strong{ color:#003366;}.table-professional{ width:100%;border-collapse:collapse;font-size:11px;margin-bottom:16px;}.table-professional th{ background:#f8f9fa;border-bottom:2px solid #dee2e6;padding:8px;text-align:left;font-weight:600;color:#003366;font-size:10px;text-transform:uppercase;letter-spacing:0.5px;}.table-professional td{ padding:6px 8px;border-bottom:1px solid #e9ecef;color:#333;}.table-professional td.num{ text-align:right;font-variant-numeric:tabular-nums;}.table-professional tr:hover{ background:#f8f9fa;}.footer-professional{ margin-top:40px;padding-top:12px;border-top:1px solid #dee2e6;font-size:9px;color:#888;display:table;width:100%;}.footer-left{ display:table-cell;}.footer-right{ display:table-cell;text-align:right;}.urgency-bar,.cta-box,.impact-card::before,.hero-amount::before{ display:none !important;}.card{ background:white;border:1px solid #dee2e6;border-radius:4px;padding:16px;margin-bottom:16px;page-break-inside:avoid;}.card-title{ font-size:12px;font-weight:600;color:#003366;margin-bottom:12px;padding-bottom:6px;border-bottom:1px solid #e9ecef;}",
    "formatters": {
      "money": { "fn": "n => { const v=Number(n); if(!isFinite(v)) return '—'; const s=v<0?'− ':''; return `${s}$${Math.abs(v).toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2})}` }" },
      "percent": { "fn": "n => { const v=Number(n); if(!isFinite(v)) return '—'; return `${(v*100).toFixed(1)}%` }" },
      "number": { "fn": "n => { const v=Number(n); if(!isFinite(v)) return '—'; return v.toLocaleString() }" }
    },
    "valueRenderer": {
      "fn": "(row)=>{ if(!row) return '—'; if(row.format==='money') return FORMAT.money(row.value); if(row.format==='percent') return FORMAT.percent(row.value); if(row.format==='number') return FORMAT.number(row.value); return row.value ?? '—'; }"
    }
  },
  "guards": { "hideEmptyRows": true }
}